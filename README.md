# momentic-backend
Backend of the "Momentic" mobile application - social network, a mixture of TikTok and BeReal.

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
**Momentic Backend** ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å —Å–æ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.  
–ó–∞–¥–∞—á–∏ backend:
- REST API –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, —Ä–æ–ª—è–º–∏ –∏ –ø—Ä–∞–≤–∞–º–∏.
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–∏–¥–µ–æ.
- –†–µ–∞–∫—Ü–∏–∏ (—ç–º–æ–¥–∑–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏).
- –†–µ–π—Ç–∏–Ω–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞.
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (JWT).
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è.

## üõ†Ô∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- –Ø–∑—ã–∫: **Go (golang 1.21+)**
- –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫: **Gin Router**
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: **PostgreSQL**
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è: **Docker**
- CLI / —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API: **curl**
- CDN –∏ –∑–∞—â–∏—Ç–∞: **Cloudflare**
- –ú–∏–≥—Ä–∞—Ü–∏–∏: **go-migrate**
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è: **JWT / OAuth2**

## üë• –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

- **–ì–æ—Å—Ç—å**
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è / –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è.
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**
  - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏ –ø—É–±–ª–∏–∫—É–µ—Ç –≤–∏–¥–µ–æ.
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –ª–µ–Ω—Ç—ã (–¥—Ä—É–∑–µ–π –∏ –≥–ª–æ–±–∞–ª—å–Ω—É—é).
  - –°—Ç–∞–≤–∏—Ç —Ä–µ–∞–∫—Ü–∏–∏ –∏ –ø–∏—à–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.
  - –£—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ä–µ–π—Ç–∏–Ω–≥–µ.
- **–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä**
  - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –∂–∞–ª–æ–±—ã.
  - –£–¥–∞–ª—è–µ—Ç –≤–∏–¥–µ–æ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.
  - –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**
  - –£–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ä–æ–ª—è–º–∏.
  - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ä–µ–π—Ç–∏–Ω–≥–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É.

### –î–∏–∞–≥—Ä–∞–º–º–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
![Use Case Diagram](docs/images/usecase_diagram.png)

## ER-–¥–∏–∞–≥—Ä–∞–º–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
![ER Diagram](docs/images/er_diagram.png)

## –°—Å—ã–ª–∫–∞ –Ω–∞ API —Å–µ—Ä–≤–µ—Ä–∞
- –ë–∞–∑–æ–≤—ã–π URL API: https://api.momentic.app/v1  
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (OpenAPI/Swagger): https://api.momentic.app/docs

**–ö–ª—é—á–µ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (–ø—Ä–∏–º–µ—Ä):**
- `POST https://api.momentic.app/v1/auth/login` ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (—Å—Ç—É–¥. –ø–æ—á—Ç–∞)
- `GET  https://api.momentic.app/v1/feed/global` ‚Äî –≥–ª–æ–±–∞–ª—å–Ω–∞—è –ª–µ–Ω—Ç–∞
- `GET  https://api.momentic.app/v1/feed/friends` ‚Äî –ª–µ–Ω—Ç–∞ –¥—Ä—É–∑–µ–π
- `POST https://api.momentic.app/v1/videos` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ
- `POST https://api.momentic.app/v1/reactions` ‚Äî —Ä–µ–∞–∫—Ü–∏—è/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
- `GET  https://api.momentic.app/v1/ranking` ‚Äî —Ä–µ–π—Ç–∏–Ω–≥
- `GET  https://api.momentic.app/v1/users/{id}` ‚Äî –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## Swagger API Documentation

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç Swagger (OpenAPI) —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è backend-—á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.  
–§–∞–π–ª —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏: `swaga.yaml`

Swagger –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è REST API, –ø–æ–∑–≤–æ–ª—è—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é, –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –∑–∞–≥–ª—É—à–∫–∏.

### –ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ [https://editor.swagger.io/](https://editor.swagger.io/)
2. –ù–∞–∂–º–∏—Ç–µ **File ‚Üí Import file**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª `swaga.yaml` (docs/swaga.yaml)
4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ—è–≤–∏—Ç—Å—è –≤ –ø—Ä–∞–≤–æ–π —á–∞—Å—Ç–∏ —ç–∫—Ä–∞–Ω–∞.

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–µ—Ç–µ–≤–æ–º—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—é:
- —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å cloudflared –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–æ–º–∞–Ω–¥–æ–π `cloudflared tunnel --url http://localhost:8080` –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Ç—É–Ω–Ω–µ–ª—è cloudflare. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã cloudflare –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–π –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –¥–æ–º–µ–Ω, —Å –∫–æ—Ç–æ—Ä—ã–º –≤–ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–∏ –º–æ–∂–Ω–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–∏ –ø–æ–º–æ—â–∏ –ª—é–±–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –¥–æ—Å—Ç—É–ø–æ–º –≤ —Å–µ—Ç—å Internet. –ó–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥—É—Ç –ø—Ä–µ–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º cloudflare, –∞ –ø–æ–∑–∂–µ –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å—Å—è –Ω–∞ –ø–æ—Ä—Ç 8080 –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞:
# –ë—ç–∫–µ–Ω–¥ –≤–∏–¥–µ–æ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –±—ç–∫–µ–Ω–¥–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker. –°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:
1. **Backend API** (Golang)
2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** (PostgreSQL)
3. **–§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** (MinIO ‚Äî S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ –æ–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ–µ–∫—Ç–∞ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ:
*   [Docker Desktop](https://www.docker.com/products/docker-desktop) (–≤–∫–ª—é—á–∞–µ—Ç Docker Compose)
*   [Go](https://go.dev/dl/) (–ù–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –±—ç–∫–µ–Ω–¥–∞)

## –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

| –°–µ—Ä–≤–∏—Å | –ò–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ | –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –ø–æ—Ä—Ç | –•–æ—Å—Ç-–ø–æ—Ä—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- | :--- | :--- |
| **Backend** | `app_backend` | 8080 | **8080** | –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Go. |
| **Database** | `app_db` | 5432 | **5432** | –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. |
| **Storage** | `app_storage` | 9000 (API)<br>9001 (UI) | **9000**<br>**9001** | MinIO –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–∏–¥–µ–æ—Ñ–∞–π–ª–æ–≤. |

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤–∞—à–∏—Ö –ø–∞–ø–æ–∫ –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:
```text
/project-root
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ main.go <–∏ –æ—Å—Ç–∞–ª—å–Ω–æ–π –ø—Ä–æ–µ–∫—Ç>
‚îî‚îÄ‚îÄ go.mod
```

### 2. –ö–æ–º–ø–∏–ª—è—Ü–∏—è Go-–±–∏–Ω–∞—Ä–Ω–∏–∫–∞
Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Alpine Linux. –í—ã –¥–æ–ª–∂–Ω—ã —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å (–∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª—è—Ü–∏—è) –≤–∞—à–µ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è Linux, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫—É—é –û–° –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –Ω–∞ —Å–≤–æ–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ.
–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤—ã –¥–æ–ª–∂–Ω—ã —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å (–∫—Ä–æ—Å—Å-–∫–æ–º–ø–∏–ª—è—Ü–∏—è) –≤–∞—à–µ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è Linux, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫—É—é –û–° –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –Ω–∞ —Å–≤–æ–µ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ.
–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Mac/Linux:
```bash
CGO_ENABLED=0 GOOS=linux go build -o momentic-backend.
```

–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π Windows:
```Powershell
cd backend
$env:CGO_ENABLED="0"; $env:GOOS="linux"; go build -o momentic-backend .
cd ..
```

### 3. –°–±–æ—Ä–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
–ò–∑ –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
docker-compose up --build -d
```
